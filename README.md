# DontRP - Плагин для ролевой игры в Minecraft

DontRP - это плагин для серверов Minecraft на базе Paper/Spigot, который добавляет систему ролевых имен (RP имен), описаний персонажей, команды для отыгрыша (me, do, try, todo, roll), а также систему цветных имен и настроек броска кубика.

## Возможности

- **Система RP имен**: Установите имя и фамилию для своего персонажа, которые будут отображаться в ролевых командах.
- **Описания персонажей**: Создайте описание своего персонажа, которое другие игроки могут просмотреть.
- **Ролевые команды**:
  - `/me <действие>` - Описание действия от первого лица.
  - `/do <описание>` - Описание действия от третьего лица.
  - `/try <действие>` - Попытка выполнить действие с шансом успеха/неудачи.
  - `/todo <действие> * <слова>` - Действие со словами персонажа.
  - `/roll [min] [max]` - Бросок кубика в указанном диапазоне.
- **Настройки броска кубика**: Через меню или команду можно установить минимальное и максимальное значение для броска кубика.
- **Система цветных имен**: Выберите цвет для своего RP имени из доступных цветов (требуются права).
- **Локальный чат**: Сообщения ролевых команд видны только игрокам в определенном радиусе.
- **Меню настроек**: Удобное интерактивное меню для настройки всех параметров.
- **Поддержка PlaceholderAPI**: Используйте плейсхолдеры для отображения RP имени и описания в других плагинах.
- **Административные команды**: Управление RP именами и описаниями других игроков.

## Установка

1. Убедитесь, что ваш сервер использует Paper/Spigot (версия 1.21.4 или выше).
2. Установите [PlaceholderAPI](https://www.spigotmc.org/resources/placeholderapi.6245/) (опционально, но рекомендуется).
3. Скачайте последнюю версию DontRP из [релизов](https://github.com/Dont65/dontrp/releases) (или соберите из исходного кода).
4. Поместите файл `DontRP.jar` в папку `plugins` вашего сервера.
5. Перезапустите сервер.

## Команды

### Основные команды

| Команда | Описание | Пример |
|---------|----------|--------|
| `/rpname` | Показать свое RP имя | `/rpname` |
| `/rpname <Имя> <Фамилия>` | Установить RP имя | `/rpname Иван Петров` |
| `/rpname <игрок>` | Показать RP имя игрока | `/rpname Dont65` |
| `/rpname remove` | Удалить свое RP имя | `/rpname remove` |
| `/me <действие>` | Действие от первого лица | `/me улыбается` |
| `/do <описание>` | Действие от третьего лица | `/do на столе лежит книга` |
| `/try <действие>` | Попытка действия | `/try открыть сундук` |
| `/todo <действие> * <слова>` | Действие со словами | `/todo подходит к вам * Привет!` |
| `/roll [min] [max]` | Бросок кубика | `/roll 1 20` |
| `/roll default <min> <max>` | Установить значения по умолчанию | `/roll default 1 100` |
| `/description` или `/desc` | Показать свое описание | `/description` |
| `/description set <текст>` | Установить описание | `/description set Высокий и стройный эльф.` |
| `/description <игрок>` | Показать описание игрока | `/description Dont65` |
| `/rp settings` | Открыть меню настроек | `/rp settings` |
| `/rp namecolor <цвет> [игрок]` | Установить цвет имени (админы) | `/rp namecolor &c` или `/rp namecolor red Dont65` |
| `/rp reload` | Перезагрузить конфиг (админы) | `/rp reload` |
| `/rp help` | Показать справку по команде /rp | `/rp help` |

### Административные команды

| Команда | Описание | Пример |
|---------|----------|--------|
| `/adm rpname <игрок> remove` | Удалить RP имя игрока | `/adm rpname Dont65 remove` |
| `/adm rpname <игрок> <Имя> <Фамилия>` | Установить RP имя игрока | `/adm rpname Dont65 Иван Петров` |
| `/adm description <игрок> remove` | Удалить описание игрока | `/adm description Dont65 remove` |
| `/adm description <игрок> <текст>` | Установить описание игрока | `/adm description Dont65 Высокий эльф` |

## Разрешения (Permissions)

| Разрешение | Описание | По умолчанию |
|------------|----------|--------------|
| `dontrp.description.view` | Просмотр описаний других игроков | true |
| `dontrp.description.set` | Установка своего описания | true |
| `dontrp.description.admin` | Администрирование описаний | op |
| `dontrp.rpname.view` | Просмотр RP имен других игроков | true |
| `dontrp.rpname.admin` | Администрирование RP имен | op |
| `dontrp.rpname_color.*` | Доступ ко всем цветам имен | op |
| `dontrp.admin` | Полные права на плагин | op |

## Настройка

### Конфигурационные файлы

Плагин создает два конфигурационных файла:

1. `config.yml` - основные настройки плагина.
2. `rp_colors.yml` - настройки цветов для имен.

Вы можете редактировать их, чтобы изменить сообщения, форматы, материалы иконок в меню и т.д.

### Основные настройки в config.yml

- `settings.allowed-regex` - регулярное выражение для проверки имен (по умолчанию только кириллица).
- `settings.require-lastname` - обязательность фамилии (true/false).
- `settings.color-system-enabled` - включение системы цветов.
- `settings.roll.default-min` и `settings.roll.default-max` - значения по умолчанию для броска кубика.
- `settings.local-chat.enabled` - включение локального чата для ролевых команд.
- `settings.local-chat.radius` - радиус локального чата.

### Настройка цветов в rp_colors.yml

Вы можете добавлять, удалять или изменять цвета в файле `rp_colors.yml`. Каждый цвет имеет:

- `name` - отображаемое название.
- `material` - материал иконки в меню.
- `permission` - право, необходимое для выбора этого цвета.
- `color-code` - цветовой код (например, "&c" для красного).
- `slot` - слот в меню выбора цвета (0-35).

## Меню настроек

Плагин предоставляет интерактивное меню, которое можно открыть командой `/rp settings`. В меню доступны:

- **Настройка RP имени**: Изменение или удаление RP имени.
- **Описание персонажа**: Изменение или удаление описания.
- **Выбор цвета имени**: Выбор цвета для RP имени (если система цветов включена).
- **Настройки Roll**: Установка минимального и максимального значения для броска кубика.

## PlaceholderAPI

Если на сервере установлен PlaceholderAPI, вы можете использовать следующие плейсхолдеры:

| Плейсхолдер | Описание | Пример |
|-------------|----------|--------|
| `%dontrp_rpname_full%` | Полное RP имя | Иван Петров |
| `%dontrp_rpname_first%` | Только имя | Иван |
| `%dontrp_rpname_last%` | Только фамилия | Петров |
| `%dontrp_rpname_adaptive%` | Адаптивное имя (RP имя или ник) | Иван Петров |
| `%dontrp_rpname_colored%` | Окрашенное RP имя | §cИван Петров |
| `%dontrp_rpname_color%` | Цветовой код имени | &c |
| `%dontrp_description%` | Описание персонажа | Высокий и стройный эльф. |
| `%dontrp_description_<игрок>%` | Описание указанного игрока | `%dontrp_description_Dont65%` |

## Сборка из исходного кода

Если вы хотите собрать плагин самостоятельно:

1. Установите [Maven](https://maven.apache.org/).
2. Клонируйте репозиторий: `git clone https://github.com/Dont65/dontrp.git`
3. Перейдите в папку проекта: `cd DontRP`
4. Соберите проект: `mvn clean package`
5. Готовый файл `DontRP.jar` будет находиться в папке `target`.

## Баги и предложения

Если вы нашли баг или у вас есть предложение по улучшению плагина, создайте issue на [GitHub](https://github.com/Dont65/dontrp/issues).

## Лицензия

Этот проект лицензирован под лицензией MIT. Подробнее см. в файле [LICENSE](https://github.com/Dont65/dontrp/blob/main/LICENSE).
